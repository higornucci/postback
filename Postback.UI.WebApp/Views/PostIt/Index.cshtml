@model Postback.Dominio.PostIt

@{
    ViewBag.Title = "title";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>title</h2>
<div>
    @Html.DropDownListFor(x => x.Categoria, ViewBag.Categorias as SelectList)
    @Html.TextBoxFor(x => x.Conteudo)
    @Html.TextBoxFor(x => x.Tag)

        
    <input type="button" id="enviar" value="enviar" name="enviar" />
</div>

@section scripts {
    
    <link href="@Url.Content("~/Content/themes/base/minified/jquery-ui.min.css")" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/jquery.signalR-2.0.2.js"></script>
    <script src="~/Scripts/jquery-ui-1.10.4.min.js"></script>
    <script src="~/signalr/hubs"></script>

    <script>

        $(function() {
            $("#Tag").autocomplete({
                source: "/PostIt/SugerirTags",
                minLength: 2,
            });

            var hub = $.connection.postItHub;

            $.connection.hub.start().done(function() {
                $('#enviar').click(function () {
                    hub.server.enviarNovoPostIt({ "Texto": "Vai ficar o bicho" });
                });
            });
        })

    </script>
}
